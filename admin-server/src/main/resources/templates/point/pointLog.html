<!doctype html>
<html th:replace="~{layout/main :: layout(~{::title}, ~{::div#layout-container-page})}" xmlns:th="http://www.thymeleaf.org">
<head></head>
<body>
  <div id="layout-container-page" class="max-w-6xl mx-auto">
    <!-- Header Section -->
    <div class="mb-8">
      <div class="space-y-1">
        <h1 class="text-3xl font-bold tracking-tight">Point Log</h1>
        <p class="text-muted-foreground">View saved point transaction history and earnings</p>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div class="card">
        <div class="card-content p-6">
          <div class="flex items-center space-x-4">
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-green-50">
              <i class="bx bx-trending-up h-6 w-6 text-green-600"></i>
            </div>
            <div class="space-y-1">
              <p class="text-sm text-muted-foreground">Total Records</p>
              <p class="text-2xl font-bold" th:text="${items.totalElements}">0</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-content p-6">
          <div class="flex items-center space-x-4">
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-blue-50">
              <i class="bx bx-coin h-6 w-6 text-blue-600"></i>
            </div>
            <div class="space-y-1">
              <p class="text-sm text-muted-foreground">Current Page</p>
              <p class="text-2xl font-bold" th:text="${items.number + 1} + ' / ' + ${items.totalPages}">1 / 1</p>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content p-6">
          <div class="flex items-center space-x-4">
            <div class="flex h-12 w-12 items-center justify-center rounded-full bg-purple-50">
              <i class="bx bx-calendar h-6 w-6 text-purple-600"></i>
            </div>
            <div class="space-y-1">
              <p class="text-sm text-muted-foreground">Page Size</p>
              <p class="text-2xl font-bold" th:text="${items.size}">20</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Card -->
    <div class="card">
      <div class="card-header">
        <div class="flex items-center justify-between">
          <div class="space-y-1">
            <div class="card-title">Point Transaction History</div>
            <div class="card-description">Recent point earning activities and transaction records</div>
          </div>
          <div class="flex items-center space-x-2">
            <div class="badge badge-default">
              <i class="bx bx-list-ul h-3 w-3 mr-1"></i>
              <span th:text="${items.numberOfElements} + ' items'">0 items</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card-content p-0">
        <!-- Data Table - Show when items exist -->
        <div th:if="${items.hasContent()}" class="overflow-x-auto">
          <table class="table">
            <thead class="table-header">
              <tr class="table-row">
                <th class="table-head">
                  <div class="flex items-center space-x-2">
                    <i class="bx bx-user h-4 w-4 text-muted-foreground"></i>
                    <span>User Name</span>
                  </div>
                </th>
                <th class="table-head">
                  <div class="flex items-center space-x-2">
                    <i class="bx bx-coin h-4 w-4 text-muted-foreground"></i>
                    <span>Points</span>
                  </div>
                </th>
                <th class="table-head">
                  <div class="flex items-center space-x-2">
                    <i class="bx bx-calendar h-4 w-4 text-muted-foreground"></i>
                    <span>Saved Date</span>
                  </div>
                </th>
                <th class="table-head">
                  <div class="flex items-center space-x-2">
                    <i class="bx bx-info-circle h-4 w-4 text-muted-foreground"></i>
                    <span>Status</span>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody class="table-body">
              <tr class="table-row" th:each="item : ${items}">
                <td class="table-cell">
                  <div class="flex items-center space-x-3">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary-50 text-primary-600 font-semibold text-sm">
                      <span th:text="${item.cookie.userName.substring(0,1).toUpperCase()}">U</span>
                    </div>
                    <span class="font-medium" th:text="${item.cookie.userName}">username</span>
                  </div>
                </td>
                <td class="table-cell">
                  <div class="flex items-center space-x-2">
                    <span class="inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-sm font-medium text-green-700">
                      <i class="bx bx-plus h-3 w-3 mr-1"></i>
                      <span th:text="${item.amount}">0</span>
                    </span>
                  </div>
                </td>
                <td class="table-cell">
                  <div class="space-y-1">
                    <div class="text-sm font-medium" th:text="${#temporals.format(item.createdDate, 'yyyy-MM-dd')}">2024-01-01</div>
                    <div class="text-xs text-muted-foreground" th:text="${#temporals.format(item.createdDate, 'HH:mm:ss')}">12:00:00</div>
                  </div>
                </td>
                <td class="table-cell">
                  <span class="badge badge-default">
                    <i class="bx bx-check-circle h-3 w-3 mr-1"></i>
                    Completed
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Empty State - Show when no items -->
        <div th:unless="${items.hasContent()}" class="flex flex-col items-center justify-center py-16">
          <div class="flex h-16 w-16 items-center justify-center rounded-full bg-muted">
            <i class="bx bx-coin-stack h-8 w-8 text-muted-foreground"></i>
          </div>
          <div class="mt-4 text-center">
            <h3 class="text-lg font-semibold">No point logs found</h3>
            <p class="text-sm text-muted-foreground mt-1">
              There are no point transaction records to display yet.
            </p>
            <div class="mt-6">
              <button type="button" class="btn btn-outline" onclick="window.location.reload()">
                <i class="bx bx-refresh h-4 w-4 mr-2"></i>
                Refresh Page
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Pagination Footer -->
      <div th:if="${items.totalPages > 1}" class="card-footer">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-2 text-sm text-muted-foreground">
            <span>Showing</span>
            <span class="font-medium text-foreground" th:text="${items.numberOfElements}">0</span>
            <span>of</span>
            <span class="font-medium text-foreground" th:text="${items.totalElements}">0</span>
            <span>results</span>
          </div>
          
          <nav aria-label="Point Log Pagination">
            <div class="flex items-center space-x-2">
              <!-- Previous Button -->
              <button 
                type="button"
                th:disabled="${items.first}"
                th:onclick="|window.location.href='@{/savePointLog(page=${items.number - 1})}'|"
                class="btn btn-ghost btn-sm disabled:opacity-50 disabled:cursor-not-allowed"
                th:classappend="${items.first} ? 'pointer-events-none' : ''"
              >
                <i class="bx bx-chevron-left h-4 w-4 mr-1"></i>
                Previous
              </button>

              <!-- Page Numbers -->
              <div class="flex items-center space-x-1">
                <th:block th:each="page: ${#numbers.sequence(startPage, endPage)}">
                  <!-- Current Page -->
                  <button 
                    th:if="${page - 1 == items.number}"
                    type="button"
                    class="btn btn-default btn-sm"
                    disabled
                  >
                    <span th:text="${page}">1</span>
                  </button>
                  <!-- Other Pages -->
                  <button 
                    th:unless="${page - 1 == items.number}"
                    type="button"
                    th:onclick="|window.location.href='@{/savePointLog(page=${page - 1})}'|"
                    class="btn btn-ghost btn-sm hover:bg-accent"
                  >
                    <span th:text="${page}">1</span>
                  </button>
                </th:block>
              </div>

              <!-- Next Button -->
              <button 
                type="button"
                th:disabled="${items.last}"
                th:onclick="|window.location.href='@{/savePointLog(page=${items.number + 1})}'|"
                class="btn btn-ghost btn-sm disabled:opacity-50 disabled:cursor-not-allowed"
                th:classappend="${items.last} ? 'pointer-events-none' : ''"
              >
                Next
                <i class="bx bx-chevron-right h-4 w-4 ml-1"></i>
              </button>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
